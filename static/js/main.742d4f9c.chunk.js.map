{"version":3,"sources":["utils/index.js","panels/events/components/stub/Stub.jsx","utils/admin/index.js","panels/events/components/header/AppHeaderIcon.jsx","panels/events/components/header/AppHeader.jsx","panels/events/event-flow/EventFlow.jsx","utils/lwz.js","panels/events/admin/utils/api.js","panels/events/admin/EventsAdmin.jsx","companents/menu/AppTabbar.jsx","panels/events/admin/AddEventsAdmin.jsx","App.js","index.js"],"names":["bemHelper","name","BEMHelper","prefix","modifierDelimiter","outputIsString","bem","Stub","react","react_fontawesome_index_es","Object","assign","icon","spin","size","isAdmin","user","env","process","adminId","REACT_APP_ADMIN_USER_ID","id","parseInt","AppHeaderIcon","p","props","AppHeader","_useState","useState","_useState2","slicedToArray","isOpenHeadContext","setOpenHeadContext","dist_vkui","aside","dropdown_default","a","onClick","children","opened","onClose","go","asideContent","active","done_default","fill","before","header_AppHeaderIcon","EventFlow","centered","header_AppHeader","stub_Stub","lwzEncode","s","currChar","dict","data","split","out","phrase","code","i","length","push","charCodeAt","String","fromCharCode","join","lzwDecode","oldPhrase","currCode","charAt","storageGetEvent","_ref","asyncToGenerator","regenerator_default","mark","_callee","access_token","res","wrap","_context","prev","next","connect","send","method","request_id","params","key","global","v","sent","abrupt","JSON","parse","response","t0","stop","_x","apply","this","arguments","storageSetEvent","_ref2","_callee2","events","_context2","value","stringify","_x2","_x3","EventsAdmin","_React$useState","React","_React$useState2","setEvents","updateEvents","token","Error","useEffect","app_id","scope","add_default","AppTabbar","selected","data-story","text","newsfeed_default","user_default","AddEventsAdmin","setName","_React$useState3","_React$useState4","price","setPrice","_React$useState5","_React$useState6","time","setTime","_React$useState7","_React$useState8","days","setDays","sendEvents","event","oldEvents","concat","toConsumableArray","onCheck","day","e","currentTarget","checked","includes","filter","d","eventHandler","type","test","top","onChange","App","activePanel","setActivePanel","_useState3","_useState4","activeStory","setActiveStory","_useState5","_useState6","currentUser","setCurrentUser","_useState7","_useState8","setToken","subscribe","detail","tabbar","menu_AppTabbar","event_flow_EventFlow","admin_EventsAdmin","admin_AddEventsAdmin","library","add","faCircleNotch","faUserCog","faUser","faRss","root","document","getElementById","ReactDOM","render","react_default","createElement","src_App"],"mappings":"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","file":"static/js/main.742d4f9c.chunk.js","sourcesContent":["// @flow\n\nimport BEMHelper from \"react-bem-helper\";\n\nexport const bemHelper = (name: string) => {\n  return new BEMHelper({\n                         name,\n                         prefix           : \"\",\n                         modifierDelimiter: \"_\",\n                         outputIsString   : false\n                       })\n};","// @flow\n\nimport './styles.scss'\n\nimport * as React               from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { bemHelper }       from \"../../../../utils\";\n\nconst bem = bemHelper(\"stub\");\n\n\nconst Stub = () => {\n  return (\n    <div {...bem()}>\n      <FontAwesomeIcon {...bem(\"spinner\")} icon=\"circle-notch\" spin size=\"4x\" />\n    </div>\n  );\n};\n\nexport default Stub;\n","// @flow\n\nimport type { VKWebAppGetUserInfoResult } from \"../../types/vk\";\n\nexport const isAdmin = (user: ?VKWebAppGetUserInfoResult) => {\n  const env = process.env;\n  if ('REACT_APP_ADMIN_USER_ID' in env) {\n    const adminId = env.REACT_APP_ADMIN_USER_ID;\n    return !!user && !!adminId && user.id === parseInt(adminId)\n  }\n  return false\n};","// @flow\n\nimport * as React          from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport BEMHelper           from \"react-bem-helper\";\nimport { IconProp }        from \"@fortawesome/fontawesome-svg-core\";\n\ntype Props = {\n  icon: IconProp,\n  bem?: BEMHelper\n};\n\nconst AppHeaderIcon = (p: Props) => {\n  const props = !!p.bem ? p.bem(\"header-context-menu-icon\", \"\", \"Icon\") : {};\n  return (\n    <span {...props}>\n      <FontAwesomeIcon icon={p.icon} />\n    </span>\n  );\n};\n\nexport default AppHeaderIcon;\n","// @flow\nimport \"./styles.scss\";\n\nimport * as React from \"react\";\nimport {\n  Cell,\n  HeaderContext,\n  List,\n  PanelHeader,\n  PanelHeaderContent\n} from \"@vkontakte/vkui\";\nimport Icon16Dropdown from \"@vkontakte/icons/dist/16/dropdown\";\nimport Icon24Done from \"@vkontakte/icons/dist/24/done\";\nimport { bemHelper } from \"../../../../utils\";\nimport { useState } from \"react\";\nimport AppHeaderIcon from \"./AppHeaderIcon\";\n\nconst bem = bemHelper(\"app-header\");\n\ntype Props = {\n  active: string,\n  children?: React.Node,\n  isAdmin?: boolean,\n  go: string => any\n};\n\nconst AppHeader = (p: Props) => {\n  const [isOpenHeadContext, setOpenHeadContext] = useState(false);\n\n  return (\n    <>\n      <PanelHeader>\n        {p.isAdmin ? (\n          <PanelHeaderContent\n            aside={<Icon16Dropdown />}\n            onClick={() => setOpenHeadContext(!isOpenHeadContext)}\n          >\n            {p.children}\n          </PanelHeaderContent>\n        ) : (\n          p.children\n        )}\n      </PanelHeader>\n      {p.isAdmin && (\n        <HeaderContext opened={isOpenHeadContext} onClose={() => {}}>\n          <List>\n            <Cell\n              onClick={() => p.go(\"events-feed\")}\n              asideContent={\n                p.active === \"events-feed\" ? (\n                  <Icon24Done fill=\"var(--accent)\" />\n                ) : null\n              }\n              before={<AppHeaderIcon bem={bem} icon=\"rss\" />}\n            >\n              Расписание\n            </Cell>\n            <Cell\n              onClick={() => p.go(\"events-admin\")}\n              before={<AppHeaderIcon bem={bem} icon=\"user-cog\" />}\n              asideContent={\n                p.active === \"events-admin\" ? (\n                  <Icon24Done fill=\"var(--accent)\" />\n                ) : null\n              }\n            >\n              Администрирование\n            </Cell>\n          </List>\n        </HeaderContext>\n      )}\n    </>\n  );\n};\n\nexport default AppHeader;\n","// @flow\nimport \"./styles.scss\";\n\nimport * as React                         from \"react\";\nimport { Panel, Group, Div }              from \"@vkontakte/vkui\";\nimport type { VKWebAppGetUserInfoResult } from \"../../../types/vk\";\nimport Stub                               from \"../components/stub/Stub\";\nimport { isAdmin }                        from \"../../../utils/admin\";\nimport { bemHelper }                      from \"../../../utils\";\nimport AppHeader                          from \"../components/header/AppHeader\";\n\nconst bem = bemHelper(\"event-flow\");\n\ntype Props = {\n  id: string,\n  user: ?VKWebAppGetUserInfoResult,\n  go: string => any\n};\n\nconst EventFlow = (p: Props) => {\n\n  return (\n    <>\n      <Panel id={p.id} centered={!p.user}>\n        <AppHeader active={p.id} isAdmin={isAdmin(p.user)}  go={p.go}>\n          Расписание\n        </AppHeader>\n        {!p.user && <Stub />}\n        {isAdmin(p.user) && (\n          <Group>\n            <Div>Admin</Div>\n          </Group>\n        )}\n        {p.user && !isAdmin(p.user) && (\n          <Group>\n            <Div>User</Div>\n          </Group>\n        )}\n      </Panel>\n    </>\n  );\n};\n\nexport default EventFlow;\n","// @flow\n\n// LZW-compress a string\nexport function lwzEncode(s: string) {\n  let dict = {};\n  let data = (s + \"\").split(\"\");\n  let out = [];\n  let currChar;\n  let phrase = data[0];\n  let code = 256;\n  for (let i=1; i<data.length; i++) {\n    currChar=data[i];\n    if (dict[phrase + currChar] != null) {\n      phrase += currChar;\n    }\n    else {\n      out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));\n      dict[phrase + currChar] = code;\n      code++;\n      phrase=currChar;\n    }\n  }\n  out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));\n  for (let i=0; i<out.length; i++) {\n    out[i] = String.fromCharCode(out[i]);\n  }\n  return out.join(\"\");\n}\n\n// Decompress an LZW-encoded string\nexport function lzwDecode(s: string) {\n  let dict = {};\n  let data = (s + \"\").split(\"\");\n  let currChar = data[0];\n  let oldPhrase = currChar;\n  let out = [currChar];\n  let code = 256;\n  let phrase;\n  for (let i=1; i<data.length; i++) {\n    let currCode = data[i].charCodeAt(0);\n    if (currCode < 256) {\n      phrase = data[i];\n    }\n    else {\n      phrase = dict[currCode] ? dict[currCode] : (oldPhrase + currChar);\n    }\n    out.push(phrase);\n    currChar = phrase.charAt(0);\n    dict[code] = oldPhrase + currChar;\n    code++;\n    oldPhrase = phrase;\n  }\n  return out.join(\"\");\n}","// @flow\n\nimport connect                  from '@vkontakte/vkui-connect-promise';\nimport { lwzEncode, lzwDecode } from \"../../../../utils/lwz\";\n\nexport const storageGetEvent = async (access_token: string): Promise<string> => {\n  const res = await connect.send(\"VKWebAppCallAPIMethod\", {\n    method: \"storage.get\",\n    request_id: \"EVENTS\",\n    params: {\n      key: \"events\",\n      global: 1,\n      v:\"5.101\",\n      access_token\n    }\n  });\n  try{\n    return JSON.parse(lzwDecode(res.data.response));\n  } catch {\n    return []\n  }\n};\n\nexport const storageSetEvent = async (events: any, access_token: string): Promise<void> => {\n  await connect.send(\"VKWebAppCallAPIMethod\", {\n    method: \"storage.set\",\n    request_id: \"EVENTS\",\n    params: {\n      key: \"events\",\n      global: 1,\n      v:\"5.101\",\n      value: lwzEncode(JSON.stringify(events)),\n      access_token\n    }\n  })\n};","// @flow\n\nimport * as React                         from \"react\";\nimport { useEffect, useState }            from \"react\";\nimport { bemHelper }                        from \"../../../utils\";\nimport type { VKWebAppGetUserInfoResult }   from \"../../../types/vk\";\nimport { Panel, Group, CellButton, Div }    from \"@vkontakte/vkui\";\nimport { isAdmin }                          from \"../../../utils/admin\";\nimport AppHeader                            from \"../components/header/AppHeader\";\nimport Icon24Add                            from \"@vkontakte/icons/dist/24/add\";\nimport connect                              from \"@vkontakte/vkui-connect\";\nimport { storageGetEvent, storageSetEvent } from \"./utils/api\";\n\nconst bem = bemHelper(\"admin-main\");\n\ntype Props = {\n  id: string,\n  user: ?VKWebAppGetUserInfoResult,\n  token: ?string,\n  go: string => any\n};\n\nconst EventsAdmin = (p: Props) => {\n  const [events, setEvents] = React.useState([]);\n\n  const updateEvents = async () => {\n    if (!p.token) throw Error('token is required!');\n    const res = await storageGetEvent(p.token);\n    setEvents(res);\n  };\n\n  useEffect(() => {\n    p.user &&\n      !p.token &&\n      connect.send(\"VKWebAppGetAuthToken\", {\n        app_id: 7062331,\n        scope: \"groups,stats\"\n      });\n  }, [p.user, p.token]);\n\n  useEffect(() => {\n    if (p.token) {\n      updateEvents();\n    }\n  }, [p.token]);\n\n  return (\n    <Panel id={p.id}>\n      <AppHeader active={p.id} isAdmin={isAdmin(p.user)} go={p.go}>\n        События-Настройки\n      </AppHeader>\n      <Group>\n        <CellButton onClick={() => p.go('add-events-admin')} before={<Icon24Add />}>\n          Добавить новое событие\n        </CellButton>\n      </Group>\n      {/*<Group>\n        <Div>{p.token}</Div>\n      </Group>*/}\n      <Group>\n        <Div>{JSON.stringify(events)}</Div>\n      </Group>\n    </Panel>\n  );\n};\n\nexport default EventsAdmin;\n","// @flow\n\nimport * as React             from \"react\";\nimport { TabbarItem, Tabbar } from \"@vkontakte/vkui\";\nimport NewsfeedIcon           from \"@vkontakte/icons/dist/28/newsfeed\";\nimport UserIcon               from \"@vkontakte/icons/dist/28/user.js\";\n\ntype Props = {\n  active: string,\n  go: string => any\n}\n\nconst AppTabbar = (p: Props) => {\n  return (\n    <Tabbar>\n      <TabbarItem\n        onClick={() => p.go('events')}\n        selected={p.active === 'events'}\n        data-story=\"events\"\n        text=\"События\"\n      >\n        <NewsfeedIcon />\n      </TabbarItem>\n      <TabbarItem\n        onClick={() => p.go('user')}\n        selected={p.active === 'user'}\n        data-story=\"users\"\n        text=\"Личный кабинет\"\n      >\n        <UserIcon />\n      </TabbarItem>\n    </Tabbar>\n  );\n};\n\nexport default AppTabbar","// @flow\n\nimport * as React                            from \"react\";\nimport AppHeader                             from \"../components/header/AppHeader\";\nimport { isAdmin }                           from \"../../../utils/admin\";\nimport { Cell, Div, Panel }                  from \"@vkontakte/vkui\";\nimport type { VKWebAppGetUserInfoResult }    from \"../../../types/vk\";\nimport { FormLayout, Input }                 from \"@vkontakte/vkui\";\nimport connect                               from '@vkontakte/vkui-connect'\nimport { Checkbox, FormLayoutGroup, Button } from \"@vkontakte/vkui\";\nimport { storageGetEvent, storageSetEvent }  from \"./utils/api\";\n\ntype Props = {\n  id: string,\n  user: ?VKWebAppGetUserInfoResult,\n  token: ?string,\n  go: string => any\n};\n\nconst AddEventsAdmin = (p: Props) => {\n  const [name, setName] = React.useState(''),\n        [price, setPrice] = React.useState(''),\n        [time, setTime] = React.useState(0),\n        [days, setDays] = React.useState<number[]>([]);\n\n  const sendEvents = async () => {\n    if (!p.token) throw Error('token is required!');\n\n    const event = {name, price, time, days};\n    const oldEvents = await storageGetEvent(p.token);\n\n    if (!p.token) throw Error('token is required!');\n    await storageSetEvent([...oldEvents, event], p.token);\n\n    p.go(\"events-admin\")\n  };\n\n  const onCheck = (day: number) => async (e: SyntheticEvent<HTMLInputElement>) => {\n    const check = e.currentTarget.checked;\n    if (check && !days.includes(day)) {\n      setDays([...days, day])\n    } else {\n      setDays([...days.filter(d => d !== day)])\n    }\n  };\n\n  const eventHandler = (type: string) => (e: SyntheticEvent<HTMLInputElement>) => {\n    switch (type) {\n      case 'name': {\n        setName(e.currentTarget.value);\n        return\n      }\n      case 'price': {\n        const p = e.currentTarget.value;\n        if (/^\\d*$/g.test(p)) {\n          setPrice(p);\n        }\n        return\n      }\n      case 'time': {\n        setTime(e.currentTarget.value);\n        return\n      }\n      case 'submit': {\n        sendEvents();\n        return\n      }\n    }\n  };\n\n  return (\n    <Panel id={p.id}>\n      <AppHeader active={p.id} isAdmin={isAdmin(p.user)} go={p.go}>\n        Новое Событие\n      </AppHeader>\n      <FormLayout>\n        <Input type=\"text\" top=\"Название\" value={name} onChange={eventHandler('name')} />\n        <Input type=\"number\" top=\"Цена\" value={price} onChange={eventHandler('price')}/>\n        <Input type=\"time\" top=\"Время\" value={time} onChange={eventHandler('time')}/>\n        <FormLayoutGroup top=\"Повторять каждую неделю\">\n          <Checkbox checked={days.includes(0)} onClick={onCheck(0)}>Пн</Checkbox>\n          <Checkbox checked={days.includes(1)} onClick={onCheck(1)}>Вт</Checkbox>\n          <Checkbox checked={days.includes(2)} onClick={onCheck(2)}>Ср</Checkbox>\n          <Checkbox checked={days.includes(3)} onClick={onCheck(3)}>Чт</Checkbox>\n          <Checkbox checked={days.includes(4)} onClick={onCheck(4)}>Пт</Checkbox>\n          <Checkbox checked={days.includes(5)} onClick={onCheck(5)}>Сб</Checkbox>\n          <Checkbox checked={days.includes(6)} onClick={onCheck(6)}>Вс</Checkbox>\n        </FormLayoutGroup>\n        <Button size=\"xl\" onClick={eventHandler('submit')}>Добавить</Button>\n      </FormLayout>\n      <Cell>\n        <Div>{JSON.stringify({price, name, time, days})}</Div>\n      </Cell>\n    </Panel>\n  );\n};\n\nexport default AddEventsAdmin;\n","// @flow\n\nimport * as React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport connect from \"@vkontakte/vkui-connect\";\nimport { Epic, View } from \"@vkontakte/vkui\";\nimport { Panel, PanelHeader } from \"@vkontakte/vkui\";\n\nimport type { VkConnectEvent, VKWebAppGetUserInfoResult } from \"./types/vk\";\nimport EventFlow                                          from \"./panels/events/event-flow/EventFlow\";\nimport EventsAdmin                                        from \"./panels/events/admin/EventsAdmin\";\nimport AppTabbar                                          from \"./companents/menu/AppTabbar\";\nimport AddEventsAdmin                                     from \"./panels/events/admin/AddEventsAdmin\";\n\ntype Props = {};\n\nconst App = (p: Props) => {\n  const [activePanel, setActivePanel] = useState(\"events-feed\");\n  const [activeStory, setActiveStory] = useState(\"events\");\n  const [currentUser, setCurrentUser] = useState<?VKWebAppGetUserInfoResult>(\n    null\n  );\n  const [token, setToken] = useState<?string>(null);\n\n  useEffect(() => {\n    connect.subscribe((e: VkConnectEvent) => {\n      switch (e.detail.type) {\n        case \"VKWebAppGetUserInfoResult\":\n          setCurrentUser(e.detail.data);\n          break;\n        case \"VKWebAppAccessTokenReceived\":\n          setToken(e.detail.data.access_token);\n          break;\n        default:\n        //console.log(e);\n      }\n    });\n    connect.send(\"VKWebAppGetUserInfo\", {});\n  }, []);\n\n  return (\n    <Epic\n      activeStory={activeStory}\n      tabbar={<AppTabbar active={activeStory} go={setActiveStory} />}\n    >\n      <View id=\"events\" activePanel={activePanel}>\n        <EventFlow id=\"events-feed\" user={currentUser} go={setActivePanel} />\n        <EventsAdmin id=\"events-admin\" token={token} user={currentUser} go={setActivePanel} />\n        <AddEventsAdmin id=\"add-events-admin\" token={token} user={currentUser} go={setActivePanel} />\n      </View>\n      <View id=\"user\" activePanel=\"user-main\">\n        <Panel id=\"user-main\">\n          <PanelHeader>Кабинет</PanelHeader>\n        </Panel>\n      </View>\n    </Epic>\n  );\n};\n\nexport default App;\n","// @flow\n\n// Styles\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React                                       from 'react';\nimport ReactDOM                                    from 'react-dom';\nimport connect                                     from '@vkontakte/vkui-connect';\nimport { library }                                 from '@fortawesome/fontawesome-svg-core'\nimport { faCircleNotch, faRss, faUser, faUserCog } from \"@fortawesome/free-solid-svg-icons\";\nimport App                                         from './App';\n\nlibrary.add(faCircleNotch, faUserCog, faUser, faRss);\n\nconnect.send('VKWebAppInit', {});\n\nconst root = document.getElementById('root');\nif (root) {\n  ReactDOM.render(<App />, root);\n}\n"],"sourceRoot":""}