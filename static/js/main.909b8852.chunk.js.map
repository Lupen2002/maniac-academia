{"version":3,"sources":["utils/index.js","panels/events/components/stub/Stub.jsx","utils/admin/index.js","panels/events/components/header/AppHeaderIcon.jsx","panels/events/components/header/AppHeader.jsx","panels/events/event-flow/EventFlow.jsx","panels/events/admin/utils/api.js","panels/events/admin/list/utils.js","panels/events/admin/list/EventsAdmin.jsx","companents/menu/AppTabbar.jsx","panels/events/admin/add/utils.js","panels/events/admin/add/AddEventsAdmin.jsx","App.js","index.js"],"names":["bemHelper","name","BEMHelper","prefix","modifierDelimiter","outputIsString","bem","Stub","react","react_fontawesome_index_es","Object","assign","icon","spin","size","isAdmin","user","env","process","adminId","REACT_APP_ADMIN_USER_ID","id","parseInt","AppHeaderIcon","p","props","AppHeader","_useState","useState","_useState2","slicedToArray","isOpenHeadContext","setOpenHeadContext","dist_vkui","aside","dropdown_default","a","onClick","children","opened","onClose","go","asideContent","active","done_default","fill","before","header_AppHeaderIcon","EventFlow","centered","header_AppHeader","stub_Stub","baseUrl","getEvents","_getEvents","apply","this","arguments","_callee","regenerator_default","wrap","_context","prev","next","axios","get","abrupt","sent","data","stop","EventsAdmin","events","setEvents","updateEvents","_ref","asyncToGenerator","mark","res","console","log","useEffect","token","connect","send","app_id","scope","add_default","JSON","stringify","AppTabbar","selected","data-story","text","newsfeed_default","user_default","postEvents","_x","_postEvents","event","post","AddEventsAdmin","_React$useState","React","_React$useState2","setName","_React$useState3","_React$useState4","price","setPrice","_React$useState5","_React$useState6","time","setTime","_React$useState7","_React$useState8","days","setDays","sendEvents","onCheck","day","_ref2","_callee2","e","_context2","currentTarget","checked","includes","concat","toConsumableArray","filter","d","eventHandler","type","value","test","then","catch","top","onChange","App","activePanel","setActivePanel","_useState3","_useState4","activeStory","setActiveStory","_useState5","_useState6","currentUser","setCurrentUser","_useState7","_useState8","setToken","subscribe","detail","access_token","tabbar","menu_AppTabbar","event_flow_EventFlow","list_EventsAdmin","add_AddEventsAdmin","library","add","faCircleNotch","faUserCog","faUser","faRss","root","document","getElementById","ReactDOM","render","react_default","createElement","src_App"],"mappings":"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","file":"static/js/main.909b8852.chunk.js","sourcesContent":["// @flow\n\nimport BEMHelper from \"react-bem-helper\";\n\nexport const bemHelper = (name: string) => {\n  return new BEMHelper({\n                         name,\n                         prefix           : \"\",\n                         modifierDelimiter: \"_\",\n                         outputIsString   : false\n                       })\n};","// @flow\n\nimport './styles.scss'\n\nimport * as React               from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { bemHelper }       from \"../../../../utils\";\n\nconst bem = bemHelper(\"stub\");\n\n\nconst Stub = () => {\n  return (\n    <div {...bem()}>\n      <FontAwesomeIcon {...bem(\"spinner\")} icon=\"circle-notch\" spin size=\"4x\" />\n    </div>\n  );\n};\n\nexport default Stub;\n","// @flow\n\nimport type { VKWebAppGetUserInfoResult } from \"../../types/vk\";\n\nexport const isAdmin = (user: ?VKWebAppGetUserInfoResult) => {\n  const env = process.env;\n  if ('REACT_APP_ADMIN_USER_ID' in env) {\n    const adminId = env.REACT_APP_ADMIN_USER_ID;\n    return !!user && !!adminId && user.id === parseInt(adminId)\n  }\n  return false\n};","// @flow\n\nimport * as React          from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport BEMHelper           from \"react-bem-helper\";\nimport { IconProp }        from \"@fortawesome/fontawesome-svg-core\";\n\ntype Props = {\n  icon: IconProp,\n  bem?: BEMHelper\n};\n\nconst AppHeaderIcon = (p: Props) => {\n  const props = !!p.bem ? p.bem(\"header-context-menu-icon\", \"\", \"Icon\") : {};\n  return (\n    <span {...props}>\n      <FontAwesomeIcon icon={p.icon} />\n    </span>\n  );\n};\n\nexport default AppHeaderIcon;\n","// @flow\nimport \"./styles.scss\";\n\nimport * as React from \"react\";\nimport {\n  Cell,\n  HeaderContext,\n  List,\n  PanelHeader,\n  PanelHeaderContent\n} from \"@vkontakte/vkui\";\nimport Icon16Dropdown from \"@vkontakte/icons/dist/16/dropdown\";\nimport Icon24Done from \"@vkontakte/icons/dist/24/done\";\nimport { bemHelper } from \"../../../../utils\";\nimport { useState } from \"react\";\nimport AppHeaderIcon from \"./AppHeaderIcon\";\n\nconst bem = bemHelper(\"app-header\");\n\ntype Props = {\n  active: string,\n  children?: React.Node,\n  isAdmin?: boolean,\n  go: string => any\n};\n\nconst AppHeader = (p: Props) => {\n  const [isOpenHeadContext, setOpenHeadContext] = useState(false);\n\n  return (\n    <>\n      <PanelHeader>\n        {p.isAdmin ? (\n          <PanelHeaderContent\n            aside={<Icon16Dropdown />}\n            onClick={() => setOpenHeadContext(!isOpenHeadContext)}\n          >\n            {p.children}\n          </PanelHeaderContent>\n        ) : (\n          p.children\n        )}\n      </PanelHeader>\n      {p.isAdmin && (\n        <HeaderContext opened={isOpenHeadContext} onClose={() => {}}>\n          <List>\n            <Cell\n              onClick={() => p.go(\"events-feed\")}\n              asideContent={\n                p.active === \"events-feed\" ? (\n                  <Icon24Done fill=\"var(--accent)\" />\n                ) : null\n              }\n              before={<AppHeaderIcon bem={bem} icon=\"rss\" />}\n            >\n              Расписание\n            </Cell>\n            <Cell\n              onClick={() => p.go(\"events-admin\")}\n              before={<AppHeaderIcon bem={bem} icon=\"user-cog\" />}\n              asideContent={\n                p.active === \"events-admin\" ? (\n                  <Icon24Done fill=\"var(--accent)\" />\n                ) : null\n              }\n            >\n              Администрирование\n            </Cell>\n          </List>\n        </HeaderContext>\n      )}\n    </>\n  );\n};\n\nexport default AppHeader;\n","// @flow\nimport \"./styles.scss\";\n\nimport * as React                         from \"react\";\nimport { Panel, Group, Div }              from \"@vkontakte/vkui\";\nimport type { VKWebAppGetUserInfoResult } from \"../../../types/vk\";\nimport Stub                               from \"../components/stub/Stub\";\nimport { isAdmin }                        from \"../../../utils/admin\";\nimport { bemHelper }                      from \"../../../utils\";\nimport AppHeader                          from \"../components/header/AppHeader\";\n\nconst bem = bemHelper(\"event-flow\");\n\ntype Props = {\n  id: string,\n  user: ?VKWebAppGetUserInfoResult,\n  go: string => any\n};\n\nconst EventFlow = (p: Props) => {\n\n  return (\n    <>\n      <Panel id={p.id} centered={!p.user}>\n        <AppHeader active={p.id} isAdmin={isAdmin(p.user)}  go={p.go}>\n          Расписание\n        </AppHeader>\n        {!p.user && <Stub />}\n        {isAdmin(p.user) && (\n          <Group>\n            <Div>Admin</Div>\n          </Group>\n        )}\n        {p.user && !isAdmin(p.user) && (\n          <Group>\n            <Div>User</Div>\n          </Group>\n        )}\n      </Panel>\n    </>\n  );\n};\n\nexport default EventFlow;\n","// @flow\n\nimport connect                  from '@vkontakte/vkui-connect-promise';\nimport { lwzEncode, lzwDecode } from \"../../../../utils/lwz\";\n\nexport const storageGetEvent = async (access_token: string): Promise<string> => {\n  const res = await connect.send(\"VKWebAppCallAPIMethod\", {\n    method: \"storage.get\",\n    request_id: \"EVENTS\",\n    params: {\n      key: \"events\",\n      global: 1,\n      v:\"5.101\",\n      access_token\n    }\n  });\n  try{\n    return JSON.parse(lzwDecode(res.data.response));\n  } catch {\n    return []\n  }\n};\n\nexport const storageSetEvent = async (events: any, access_token: string): Promise<void> => {\n  await connect.send(\"VKWebAppCallAPIMethod\", {\n    method: \"storage.set\",\n    request_id: \"EVENTS\",\n    params: {\n      key: \"events\",\n      global: 1,\n      v:\"5.101\",\n      value: lwzEncode(JSON.stringify(events)),\n      access_token\n    }\n  })\n};","// @flow\nimport axios from 'axios';\n\nconst baseUrl = 'http://45.86.180.13:3000';\n\nexport async function getEvents() {\n  return (await axios.get(baseUrl+'/events')).data;\n}","// @flow\n\nimport * as React                           from \"react\";\nimport { useEffect, useState }              from \"react\";\nimport { bemHelper }                        from \"../../../../utils\";\nimport type { VKWebAppGetUserInfoResult }   from \"../../../../types/vk\";\nimport { Panel, Group, CellButton, Div }    from \"@vkontakte/vkui\";\nimport { isAdmin }                          from \"../../../../utils/admin\";\nimport AppHeader                            from \"../../components/header/AppHeader\";\nimport Icon24Add                            from \"@vkontakte/icons/dist/24/add\";\nimport connect                              from \"@vkontakte/vkui-connect\";\nimport { storageGetEvent, storageSetEvent } from \"../utils/api\";\nimport { getEvents }                        from \"./utils\";\n\nconst bem = bemHelper(\"admin-main\");\n\ntype Props = {\n  id: string,\n  user: ?VKWebAppGetUserInfoResult,\n  token: ?string,\n  go: string => any\n};\n\nconst EventsAdmin = (p: Props) => {\n  const [events, setEvents] = useState([]);\n\n  const updateEvents = async () => {\n    const res = await getEvents();\n    console.log('!!!', res);\n    setEvents(res);\n  };\n\n  useEffect(() => {\n    p.user &&\n      !p.token &&\n      connect.send(\"VKWebAppGetAuthToken\", {\n        app_id: 7062331,\n        scope: \"groups,stats\"\n      });\n  }, [p.user, p.token]);\n\n  useEffect(() => {\n    console.log('!!! useEffect');\n    updateEvents();\n  }, []);\n\n  return (\n    <Panel id={p.id}>\n      <AppHeader active={p.id} isAdmin={isAdmin(p.user)} go={p.go}>\n        События-Настройки\n      </AppHeader>\n      <Group>\n        <CellButton onClick={() => p.go('add-events-admin')} before={<Icon24Add />}>\n          Добавить новое событие\n        </CellButton>\n      </Group>\n      {/*<Group>\n        <Div>{p.token}</Div>\n      </Group>*/}\n      <Group>\n        <Div>{JSON.stringify(events)}</Div>\n      </Group>\n    </Panel>\n  );\n};\n\nexport default EventsAdmin;\n","// @flow\n\nimport * as React             from \"react\";\nimport { TabbarItem, Tabbar } from \"@vkontakte/vkui\";\nimport NewsfeedIcon           from \"@vkontakte/icons/dist/28/newsfeed\";\nimport UserIcon               from \"@vkontakte/icons/dist/28/user.js\";\n\ntype Props = {\n  active: string,\n  go: string => any\n}\n\nconst AppTabbar = (p: Props) => {\n  return (\n    <Tabbar>\n      <TabbarItem\n        onClick={() => p.go('events')}\n        selected={p.active === 'events'}\n        data-story=\"events\"\n        text=\"События\"\n      >\n        <NewsfeedIcon />\n      </TabbarItem>\n      <TabbarItem\n        onClick={() => p.go('user')}\n        selected={p.active === 'user'}\n        data-story=\"users\"\n        text=\"Личный кабинет\"\n      >\n        <UserIcon />\n      </TabbarItem>\n    </Tabbar>\n  );\n};\n\nexport default AppTabbar","// @flow\n\nimport axios from \"axios\";\n\nconst baseUrl = 'http://45.86.180.13:3000';\n\nexport async function postEvents(event: any) {\n  return await axios.post(baseUrl + '/events', event)\n}","// @flow\n\nimport * as React                            from \"react\";\nimport AppHeader                             from \"../../components/header/AppHeader\";\nimport { isAdmin }                           from \"../../../../utils/admin\";\nimport { Cell, Div, Panel }                  from \"@vkontakte/vkui\";\nimport type { VKWebAppGetUserInfoResult }    from \"../../../../types/vk\";\nimport { FormLayout, Input }                 from \"@vkontakte/vkui\";\nimport { Checkbox, FormLayoutGroup, Button } from \"@vkontakte/vkui\";\nimport { storageGetEvent, storageSetEvent }  from \"../utils/api\";\nimport { postEvents }                        from \"./utils\";\n\ntype Props = {\n  id: string,\n  user: ?VKWebAppGetUserInfoResult,\n  token: ?string,\n  go: string => any\n};\n\nconst AddEventsAdmin = (p: Props) => {\n  const [name, setName] = React.useState(''),\n        [price, setPrice] = React.useState<string>(''),\n        [time, setTime] = React.useState('17:00'),\n        [days, setDays] = React.useState<number[]>([]);\n\n  const sendEvents = async () => {\n    const event = {name, price, time, days};\n    await postEvents(event);\n    p.go(\"events-admin\");\n  };\n\n  const onCheck = (day: number) => async (e: SyntheticEvent<HTMLInputElement>) => {\n    const check = e.currentTarget.checked;\n    if (check && !days.includes(day)) {\n      setDays([...days, day])\n    } else {\n      setDays([...days.filter(d => d !== day)])\n    }\n  };\n\n  const eventHandler = (type: string) => (e: SyntheticEvent<HTMLInputElement>) => {\n    switch (type) {\n      case 'name': {\n        setName(e.currentTarget.value);\n        return\n      }\n      case 'price': {\n        const p = e.currentTarget.value;\n        if (/^[0-9]*$/.test(p)) {\n          console.log('!!!!', p);\n          setPrice(p);\n        }\n        return\n      }\n      case 'time': {\n        setTime(e.currentTarget.value);\n        return\n      }\n      case 'submit': {\n        console.log('!!! submit');\n        sendEvents().then(data => console.log('!!!', data)).catch(e => console.log('!!!', e));\n        return\n      }\n    }\n  };\n\n  console.log('!!!', typeof price, price);\n  return (\n    <Panel id={p.id}>\n      <AppHeader active={p.id} isAdmin={isAdmin(p.user)} go={p.go}>\n        Новое Событие\n      </AppHeader>\n      <FormLayout>\n        <Input type=\"text\" top=\"Название\" value={name} onChange={eventHandler('name')} />\n        <Input type=\"number\" value={price+''} onChange={eventHandler('price')}/>\n        <Input type=\"time\" top=\"Время\" value={time} onChange={eventHandler('time')}/>\n        <FormLayoutGroup top=\"Повторять каждую неделю\">\n          <Checkbox checked={days.includes(0)} onChange={onCheck(0)}>Пн</Checkbox>\n          <Checkbox checked={days.includes(1)} onChange={onCheck(1)}>Вт</Checkbox>\n          <Checkbox checked={days.includes(2)} onChange={onCheck(2)}>Ср</Checkbox>\n          <Checkbox checked={days.includes(3)} onChange={onCheck(3)}>Чт</Checkbox>\n          <Checkbox checked={days.includes(4)} onChange={onCheck(4)}>Пт</Checkbox>\n          <Checkbox checked={days.includes(5)} onChange={onCheck(5)}>Сб</Checkbox>\n          <Checkbox checked={days.includes(6)} onChange={onCheck(6)}>Вс</Checkbox>\n        </FormLayoutGroup>\n        <Button size=\"xl\" onClick={eventHandler('submit')}>Добавить</Button>\n      </FormLayout>\n      <Cell>\n        <Div>{JSON.stringify({price, name, time, days})}</Div>\n      </Cell>\n    </Panel>\n  );\n};\n\nexport default AddEventsAdmin;\n","// @flow\n\nimport * as React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport connect from \"@vkontakte/vkui-connect\";\nimport { Epic, View } from \"@vkontakte/vkui\";\nimport { Panel, PanelHeader } from \"@vkontakte/vkui\";\n\nimport type { VkConnectEvent, VKWebAppGetUserInfoResult } from \"./types/vk\";\nimport EventFlow                                          from \"./panels/events/event-flow/EventFlow\";\nimport EventsAdmin                                        from \"./panels/events/admin/list/EventsAdmin\";\nimport AppTabbar                                          from \"./companents/menu/AppTabbar\";\nimport AddEventsAdmin                                     from \"./panels/events/admin/add/AddEventsAdmin\";\n\ntype Props = {};\n\nconst App = (p: Props) => {\n  const [activePanel, setActivePanel] = useState(\"events-feed\");\n  const [activeStory, setActiveStory] = useState(\"events\");\n  const [currentUser, setCurrentUser] = useState<?VKWebAppGetUserInfoResult>(\n    null\n  );\n  const [token, setToken] = useState<?string>(null);\n\n  useEffect(() => {\n    connect.subscribe((e: VkConnectEvent) => {\n      switch (e.detail.type) {\n        case \"VKWebAppGetUserInfoResult\":\n          setCurrentUser(e.detail.data);\n          break;\n        case \"VKWebAppAccessTokenReceived\":\n          setToken(e.detail.data.access_token);\n          break;\n        default:\n        //console.log(e);\n      }\n    });\n    connect.send(\"VKWebAppGetUserInfo\", {});\n  }, []);\n\n  return (\n    <Epic\n      activeStory={activeStory}\n      tabbar={<AppTabbar active={activeStory} go={setActiveStory} />}\n    >\n      <View id=\"events\" activePanel={activePanel}>\n        <EventFlow id=\"events-feed\" user={currentUser} go={setActivePanel} />\n        <EventsAdmin id=\"events-admin\" token={token} user={currentUser} go={setActivePanel} />\n        <AddEventsAdmin id=\"add-events-admin\" token={token} user={currentUser} go={setActivePanel} />\n      </View>\n      <View id=\"user\" activePanel=\"user-main\">\n        <Panel id=\"user-main\">\n          <PanelHeader>Кабинет</PanelHeader>\n        </Panel>\n      </View>\n    </Epic>\n  );\n};\n\nexport default App;\n","// @flow\n\n// Styles\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React                                       from 'react';\nimport ReactDOM                                    from 'react-dom';\nimport connect                                     from '@vkontakte/vkui-connect';\nimport { library }                                 from '@fortawesome/fontawesome-svg-core'\nimport { faCircleNotch, faRss, faUser, faUserCog } from \"@fortawesome/free-solid-svg-icons\";\nimport App                                         from './App';\n\nlibrary.add(faCircleNotch, faUserCog, faUser, faRss);\n\nconnect.send('VKWebAppInit', {});\n\nconst root = document.getElementById('root');\nif (root) {\n  ReactDOM.render(<App />, root);\n}\n"],"sourceRoot":""}